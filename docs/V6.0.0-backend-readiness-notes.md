# KinoCampus V6.0.0 — Backend Readiness Notes

## O que foi feito nesta versão
1) **Separação Frontend/Backend**
- `frontend/` contém todas as páginas e assets.
- `backend/` (placeholder) contém um esqueleto Express + rotas iniciais.

2) **Base para evitar redundâncias em JS**
- `frontend/assets/js/kc-utils.v600.js`: utilitários centralizados.
- `frontend/assets/js/kc-api.client.v600.js`: cliente de API + fallback estático.
- `search.js` e `filters.js` agora delegam para `KCUtils`/`KCAPI` quando disponíveis.

3) **Limpeza segura (sem mudar identidade/lógica central)**
- Removidas implementações antigas de tema de dentro do `script.v554.js`.
- `script.v554.js` agora **não** tenta gerenciar tema; ele só inicializa tema se `theme.v556.js` estiver presente.
- Removido `kcInitImageFallbacks()` duplicado na inicialização.
- Removidos handlers inline redundantes (`onclick="toggleTheme()"`, `onkeyup="filterPosts()"`) — os scripts já cuidam disso.

4) **Ponte para a próxima fase**
- `kcCreateUserPost()` espelha o post no backend caso `KCAPI.setConfig({ baseURL: '/api/v1' })` esteja habilitado.

---

## Redundâncias encontradas (e recomendação)
### JS duplicado entre arquivos
- `normalizeText`, `escapeHtml`, `formatCurrencyBRL` apareciam em mais de um lugar.
  - Solução: centralizar em `KCUtils` e migrar gradualmente.

### Tema duplicado
- Versões antigas do tema existiam em `script.v554.js` e em scripts inline.
  - Solução: manter o tema apenas em `theme.v556.js` + snippet no `<head>`.

### Responsividade duplicada
- Parte das funções de responsividade (drag/resize helpers) existia tanto em `script.v554.js` quanto em `script.v556.js`.
  - Recomendação: no V6.1, mover tudo para um único arquivo (ex: `kc-responsive.js`) e deixar `script.v554.js` focado em features de UI.

---

## Pontos para preparar formulários e interações para API
1) **Buscar**
- Transformar a busca do header em um `<form role="search">` com `name="q"`.
- Hoje a busca é JS-first; com `<form>` você ganha fallback e rotas mais limpas.

2) **Filtros (tabs)**
- Padronizar `data-category` nas tabs (além do `href="#categoria"`).
- Padronizar `data-category` e/ou `data-kc-tags` nos cards.

3) **Criação de posts**
- O modal já captura um objeto rico. Para a API:
  - Garantir campos estáveis: `module`, `category`, `tags[]`, `title`, `description`, `price`, `images[]`.
  - Definir como enviar imagens: primeiro corte pode ser URL (armazenar em S3) ou base64 (temporário).

---

## Componentização (para reduzir repetição de HTML)
Hoje Header/Footer/Menu estão repetidos em todas as páginas.

Opções para a próxima etapa:
- **Server-side** (recomendado com backend): usar EJS/Handlebars e partials (`<%- include('header') %>`).
- **Client-side** (modo estático): usar `fetch('partials/header.html')` e injetar; exige servir via http (Live Server).

---

## CSS: consistência de variáveis e risco de conflito
- `styles.v554.css` tem muitos blocos repetidos para `.kc-card` e `.kc-feed-tabs`.
  - Recomenda-se, em V6.1, dividir em:
    - `tokens.css` (variáveis e temas)
    - `layout.css` (grid/containers)
    - `components/*.css` (cards, tabs, hero, ranking)
  - Isso reduz overrides inesperados e facilita novas páginas.
